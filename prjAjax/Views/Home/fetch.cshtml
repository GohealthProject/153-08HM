
@{
    ViewData["Title"] = "fetch";
}

<h1>fetch</h1>
<img id="img1" />
<div id="div1"></div>
<ul id="ul1"></ul>


@section Scripts{
    <script>
        //fetch('@Url.Content("~/Ajax/index")?name=Mary&age=30')
        //    .then(response => {
        //        console.log(response);
        //        console.log(response.ok);
        //        console.log(response.status);
        //         console.log(response.headers.get('Content-Type'));
        //         console.log(response.headers.get('Content-Length'));
        //         console.log(response.headers.get('Date'));
        //         if(response.ok){
        //           return  response.text();
        //         }else{
        //         }
        //    })
        //    .then(data=>{
        //        console.log(data);
        //    })
        //fetch('@Url.Content("~/Ajax/index")?name=Mary&age=30')
        //    .then(response => response.text())
        //    .then(data => document.querySelector("#div1"));

      async function loadtext(){
      const response =await fetch('@Url.Content("~/Ajax/index")?name=Mary&age=30');
     const data =  await(response.text());
              document.querySelector("#div1").innerHTML=data;

}
        loadtext();


        //fetch('@Url.Content("~/Ajax/cities")')
        //.then(response=>response.json())
        //.then(datas=>{ 
        //    const city=datas.map(city=>`<li>${city}</li>`)
        //document.querySelector("#ul1").innerHTML=city.join("");
        //});
        async function loadcity(){
        
            const response = await fetch('@Url.Content("~/Ajax/cities")')
            const data = await (response.json());
            const city = data.map(city => `<li>${city}</li>`)
            document.querySelector("#ul1").innerHTML = city.join("");
        
        
        }
        loadcity();




        //fetch('@Url.Content("~/Ajax/getImgById/6")')
        //.then(response=>response.blob())
        //.then(datas=>
        //    document.querySelector("#img1").src=URL.createObjectURL(datas)
        //)

        async function loadimg(){
            const response = await fetch('@Url.Content("~/Ajax/getImgById/6")')
            const data = await (response.blob());
            document.querySelector("#img1").src = URL.createObjectURL(data)
        }

        loadimg();


    </script>
}